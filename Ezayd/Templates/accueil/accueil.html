{% load static %}

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Ezayd - Plateforme d'Ench√®res en Ligne | V√©hicules et √âquipements</title>
    <meta name="description" content="D√©couvrez Ezayd, la plateforme d'ench√®res en ligne pour v√©hicules, √©quipements industriels et plus. Participez aux ench√®res en direct et trouvez les meilleures offres.">
    <meta name="keywords" content="ench√®res, v√©hicules, √©quipements, vente aux ench√®res, Alg√©rie, voitures, camions">
    <meta name="author" content="Ezayd">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Ezayd - Plateforme d'Ench√®res en Ligne">
    <meta property="og:description" content="Participez aux ench√®res en ligne pour v√©hicules et √©quipements. Trouvez les meilleures offres sur Ezayd.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ezayd.com">
    <meta property="og:image" content="{% static 'img/og-image.jpg' %}">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Ezayd - Plateforme d'Ench√®res en Ligne">
    <meta name="twitter:description" content="Participez aux ench√®res en ligne pour v√©hicules et √©quipements.">
    <meta name="twitter:image" content="{% static 'img/og-image.jpg' %}">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{% static 'img/mini_logo1.png' %}">
    <link rel="apple-touch-icon" href="{% static 'img/mini_logo1.png' %}">

    <!-- Preload Critical Resources -->
    <link rel="preload" href="{% static 'fonts/outfit.woff2' %}" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="{% static 'css/critical.css' %}" as="style">
    <link rel="preload" href="{% static 'img/logo-site.png' %}" as="image">

    <!-- Critical CSS -->
    <link rel="stylesheet" href="{% static 'css/critical.css' %}">

    <!-- Non-critical CSS (loaded asynchronously) -->
    <link rel="preload" href="{% static 'css/main.css' %}" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="{% static 'css/main.css' %}"></noscript>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" crossorigin="anonymous">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Ezayd",
      "description": "Plateforme d'ench√®res en ligne pour v√©hicules et √©quipements",
      "url": "https://ezayd.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://ezayd.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
</head>

<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Aller au contenu principal</a>

    <div id="root">


<!-- --------------------------------------------- nav bar ------------------------------------------------ -->
<header class="header" style="width: 100%; background: #000000; color: #fff;">
  <nav class="navbar" style="max-width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 2rem; gap: 1rem;">

    <!-- Logo -->
    <div style="flex: 0 0 auto;">
      <img src="{% static 'img/logo-site.png' %}" alt="Logo Ezayd" style="height: 80px; transition: transform 0.2s ease;">
    </div>

    <!-- Barre de recherche -->
    <div style="flex: 1; display: flex; justify-content: center;">
      <form method="get" action="{% url 'search' %}" role="search" style="position: relative; width: 100%; max-width: 600px;">
        <input type="text" name="q" placeholder="Rechercher un v√©hicule ou un √©quipement..."
               style="width: 100%; padding: 0.75rem 2.5rem 0.75rem 1rem; background: #333; color: white; border: 1px solid #555; border-radius: 20px; transition: all 0.3s ease; font-size: 14px;"
               onfocus="this.style.borderColor='#777'; this.style.boxShadow='0 0 0 2px rgba(255,255,255,0.1)'"
               onblur="this.style.borderColor='#555'; this.style.boxShadow='none'">
        <button type="submit" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #fff; cursor: pointer; transition: color 0.2s ease;"
                onmouseover="this.style.color='#ccc'" onmouseout="this.style.color='#fff'">
          <i class="fas fa-search"></i>
        </button>
      </form>
    </div>

    <!-- Ic√¥nes √† droite -->
    <div style="display: flex; align-items: center; gap: 20px; flex-shrink: 0;">
      
 

<!-- Notification -->
{% if user.is_authenticated %}
  <a href="{% url 'notifications' %}" style="position: relative; color: #fff; transition: color 0.2s ease;"
     onmouseover="this.style.color='#ccc'" onmouseout="this.style.color='#fff'">
    <i class="fas fa-bell" style="font-size: 20px;"></i>
    {% if unread_count != 0 %}
      <span style="position: absolute; top: -5px; right: -5px; background: #ff4444; color: white; font-size: 10px; padding: 2px 5px; border-radius: 50%; animation: pulse 2s infinite;">{{unread_count}}</span>
    {% endif %}
    </a>
{% else %}
  <a href="{% url 'connexion' %}?next={% url 'notifications' %}" style="position: relative; color: #fff; transition: color 0.2s ease;"
     onmouseover="this.style.color='#ccc'" onmouseout="this.style.color='#fff'">
    <i class="fas fa-bell" style="font-size: 20px;"></i>
  </a>
{% endif %}


  <!-- Panier -->
  {% if user.is_authenticated %}
    <a href="{% url 'panier' %}" style="color: #fff; transition: color 0.2s ease;"
      onmouseover="this.style.color='#ccc'" onmouseout="this.style.color='#fff'">
      <i class="fas fa-shopping-cart" style="font-size: 20px;"></i>
    </a>
  {% else %}
    <a href="{% url 'connexion' %}?next={% url 'panier' %}" style="color: #fff; transition: color 0.2s ease;"
      onmouseover="this.style.color='#ccc'" onmouseout="this.style.color='#fff'">
      <i class="fas fa-shopping-cart" style="font-size: 20px;"></i>
    </a>
  {% endif %}


      <!-- Profil utilisateur -->
      {% if user.is_authenticated %}
      <div style="position: relative;">
        <button onclick="toggleDropdown()" style="border: none; background: none; display: flex; align-items: center; gap: 8px; cursor: pointer; color: #fff; padding: 4px; border-radius: 6px; transition: background-color 0.2s ease;"
                onmouseover="this.style.backgroundColor='rgba(255,255,255,0.1)'" onmouseout="this.style.backgroundColor='transparent'">
          <img src="{% if user.pfp %}{{ user.pfp.url }}{% else %}{% static 'img/default-avatar.png' %}{% endif %}" 
               alt="PDP" style="width: 40px; height: 40px; border-radius: 6px; object-fit: cover; border: 2px solid transparent; transition: border-color 0.2s ease;">
          
          <!-- Nom d'utilisateur -->
          <span style="font-size: 14px; font-weight: 500;">{{ user.first_name }} {{ user.last_name|slice:":1" }}.</span>
          
          <i class="fas fa-caret-down" style="transition: transform 0.2s ease;"></i>
        </button>

        <!-- Menu dropdown -->
        <div id="userDropdown" style="display: none; position: absolute; right: 0; top: 55px; background: #2c2c2c; color: #fff; border: 1px solid #444; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.6); z-index: 100; min-width: 220px; opacity: 0; transform: translateY(-10px); transition: all 0.2s ease;">
          <!-- En-t√™te avec nom complet -->
          <div style="padding: 12px 16px; border-bottom: 1px solid #444;">
            <div style="font-weight: bold; font-size: 15px;">{{ user.first_name }} {{ user.last_name }}</div>
            <div style="font-size: 13px; color: #aaa; margin-top: 2px;">{{ user.email }}</div>
          </div>
   
          
          <a href="{% url 'profil' %}" style="display: flex; align-items: center; padding: 12px 16px; text-decoration: none; color: #fff; transition: background-color 0.2s ease;"
             onmouseover="this.style.backgroundColor='#404040'" onmouseout="this.style.backgroundColor='transparent'">
            <i class="fas fa-user" style="margin-right: 8px; width: 16px;"></i>Mon profil
          </a>
          
  
          
          <hr style="margin: 0; border: none; border-top: 1px solid #444;">
          
          <a href="{% url 'deconnexion' %}" style="display: flex; align-items: center; padding: 12px 16px; text-decoration: none; color: #fff; transition: background-color 0.2s ease; border-radius: 0 0 8px 8px;"
             onmouseover="this.style.backgroundColor='#404040'" onmouseout="this.style.backgroundColor='transparent'">
            <i class="fas fa-sign-out-alt" style="margin-right: 8px; width: 16px;"></i>Se d√©connecter
          </a>
        </div>
      </div>
      {% else %}
        
          <button class="login-btn" aria-label="Se connecter" style="background: #333; color: white; border: 1px solid #555; padding: 8px 16px; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-size: 14px;"
                  onmouseover="this.style.backgroundColor='#444'; this.style.borderColor='#666'" 
                  onmouseout="this.style.backgroundColor='#333'; this.style.borderColor='#555'">
            Connexion
          </button>
        
      {% endif %}
    </div>

  </nav>
</header>

<style>
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }
  
  /* Am√©lioration du focus pour l'accessibilit√© */
  .login-btn:focus, a:focus {
    outline: 2px solid #fff;
    outline-offset: 2px;
  }
  
  /* Animation smooth pour le dropdown */
  #userDropdown.show {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }
</style>

<script>
  function toggleDropdown() {
    const menu = document.getElementById("userDropdown");
    const button = event.target.closest('button');
    const icon = button.querySelector('.fa-caret-down');
    
    if (menu.style.display === "block") {
      // Fermer avec animation
      menu.style.opacity = "0";
      menu.style.transform = "translateY(-10px)";
      setTimeout(() => {
        menu.style.display = "none";
      }, 200);
      icon.style.transform = "rotate(0deg)";
    } else {
      // Ouvrir avec animation
      menu.style.display = "block";
      setTimeout(() => {
        menu.style.opacity = "1";
        menu.style.transform = "translateY(0)";
      }, 10);
      icon.style.transform = "rotate(180deg)";
    }
  }

  document.addEventListener('click', function(event) {
    const dropdown = document.getElementById("userDropdown");
    const button = event.target.closest('button');
    
    if (!event.target.closest('#userDropdown') && !button) {
      // Fermer avec animation
      if (dropdown && dropdown.style.display === "block") {
        dropdown.style.opacity = "0";
        dropdown.style.transform = "translateY(-10px)";
        setTimeout(() => {
          dropdown.style.display = "none";
        }, 200);
        
        // Reset icon rotation
        const icon = document.querySelector('.fa-caret-down');
        if (icon) icon.style.transform = "rotate(0deg)";
      }
    }
  });
</script>
<!-- ------------------------------------------ top ------------------------------------------------------------------------ -->


        <!-- Main Content -->
        <main id="main-content" class="main-content">
            <!-- Hero Carousel Section -->
            <section class="hero-section" aria-label="Ench√®res en vedette">
                <h1 class="sr-only">Ezayd - Plateforme d'ench√®res en ligne</h1>
                <div class="carousel-container" role="region" aria-label="Carrousel des ench√®res en vedette">
                    <div class="carousel-track" aria-live="polite">
                        <article class="carousel-slide" aria-label="Ench√®re VOLKSWAGEN TIGUAN 2009">
                            <div class="slide-images">
                                <img src="/images/image_0_OyEXuhm.jpg" alt="VOLKSWAGEN TIGUAN 2009 - Image principale" class="main-image" loading="eager" width="800" height="600">
                                <div class="thumbnail-images">
                                    <img src="/images/image_2_UMHIYCy.jpg" alt="VOLKSWAGEN TIGUAN 2009 - Vue 2" class="thumbnail" loading="lazy" width="200" height="150">
                                    <img src="/images/image_1_alecaFi.jpg" alt="VOLKSWAGEN TIGUAN 2009 - Vue 3" class="thumbnail" loading="lazy" width="200" height="150">
                                </div>
                            </div>
                            <div class="slide-content">
                                <h2 class="slide-title">VOLKSWAGEN-TIGUAN-2009</h2>
                                <div class="slide-info">
                                    <div class="price-info">
                                        <i class="fas fa-star" aria-hidden="true"></i>
                                        <span class="price-label">Offre actuelle</span>
                                        <span class="price-value">225 555 555.00 DA</span>
                                    </div>
                                    <div class="time-info">
                                        <i class="fas fa-clock" aria-hidden="true"></i>
                                        <span class="time-remaining">35 jours restants</span>
                                    </div>
                                </div>
                                <div class="badge top-auction">
                                    <i class="fas fa-crown" aria-hidden="true"></i>
                                    <span>Top Ench√®re</span>
                                </div>
                            </div>
                        </article>
                    </div>
                    <button class="carousel-btn carousel-prev" aria-label="Ench√®re pr√©c√©dente"><i class="fas fa-chevron-left" aria-hidden="true"></i></button>
                    <button class="carousel-btn carousel-next" aria-label="Ench√®re suivante"><i class="fas fa-chevron-right" aria-hidden="true"></i></button>
                    <div class="carousel-indicators" role="tablist" aria-label="Indicateurs du carrousel">
                        <button class="indicator active" role="tab" aria-selected="true" aria-label="Aller √† l'ench√®re 1"></button>
                        <button class="indicator" role="tab" aria-selected="false" aria-label="Aller √† l'ench√®re 2"></button>
                        <button class="indicator" role="tab" aria-selected="false" aria-label="Aller √† l'ench√®re 3"></button>
                    </div>
                </div>
            </section>
            


<!-- ----------------------------------------------------------------------------------------------------------------- -->
{% comment %} -------------------------------------------- {% endcomment %}
{% include './enchaires.html' %}
{% comment %} -------------------------------------------- {% endcomment %}

       

<!-- ------------------------------------------------------------------------------------------------------------------------------ -->
        </main> 
        
        <!-- Footer -->
        <footer class="footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-grid">
                    <div class="footer-column">
                        <h3>Entreprise</h3>
                        <ul>
                            <li><a href="/a-propos">√Ä Propos de Nous</a></li>
                            <li><a href="/services">Nos Services</a></li>
                            <li><a href="/confidentialite">Politique de Confidentialit√©</a></li>
                            <li><a href="/affiliation">Programme d'Affiliation</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Obtenir de l'Aide</h3>
                        <ul>
                            <li><a href="/faq">FAQ</a></li>
                            <li><a href="/support">Signaler un Probl√®me</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Regarder les Ench√®res</h3>
                        <ul>
                            <li><a href="/encheres-actives">Ench√®res en Direct</a></li>
                            <li><a href="/encheres-terminees">Ench√®res Termin√©es</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Suivez-nous</h3>
                        <div class="social-links">
                            <a href="#" aria-label="Facebook" rel="noopener noreferrer" target="_blank"><i class="fab fa-facebook-f" aria-hidden="true"></i></a>
                            <a href="#" aria-label="Twitter" rel="noopener noreferrer" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                            <a href="#" aria-label="Instagram" rel="noopener noreferrer" target="_blank"><i class="fab fa-instagram" aria-hidden="true"></i></a>
                            <a href="#" aria-label="LinkedIn" rel="noopener noreferrer" target="_blank"><i class="fab fa-linkedin-in" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Login Modal -->
        <div class="modal" id="login-modal" role="dialog" aria-labelledby="login-title" aria-hidden="true">
            <div class="modal-content">
                <button class="modal-close" aria-label="Fermer la modal">√ó</button>
                <div class="modal-header">
                    <img src="{% static 'img/mini_logo.png' %}" alt="Logo Ezayd" class="modal-logo" width="60" height="60">
                    <h2 id="login-title">Connexion</h2>
                </div>
                {% if messages %}
                    <ul class="errorlist">
                        {% for message in messages %}
                            <li class="{{ message.tags }}">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                <form class="login-form" method="post" action="{% url 'connexion' %}">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="email" class="sr-only">Email</label>
                        <div class="input-wrapper">
                            <i class="fas fa-user input-icon" aria-hidden="true"></i>
                            <input type="email" id="email" name="email" class="form-input" placeholder="Nom d'utilisateur / Email" required autocomplete="username">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password" class="sr-only">Mot de passe</label>
                        <div class="input-wrapper">
                            <i class="fas fa-lock input-icon" aria-hidden="true"></i>
                            <input type="password" id="password" name="password" class="form-input" placeholder="Mot de passe" required autocomplete="current-password">
                        </div>
                    </div>
                    <button type="submit" class="submit-btn">Se connecter</button>
               
                </form>
                <div class="signup-link">
                    <p>Pas de compte ? <a href="{% url 'inscription' %}">Cr√©er un compte</a></p>
                </div>
            </div>

            
        </div>
    </div>

    <!-- Scripts -->
    <script src="{% static 'js/main.js' %}" defer></script>
    <script src="{% static 'js/carousel.js' %}" defer></script>
    <script src="{% static 'js/modal.js' %}" defer></script>
    <script>

    function toggleSidebar() {
      var sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('open');
    }
    function untoggleSidebar() {
      var sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('close');
    }
  </script>

    <!-- Google Analytics (example) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag("js", new Date());
        gtag("config", "GA_MEASUREMENT_ID");
    </script>
</body>
</html>


<style>
.lot-type-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  padding: 6px 14px;
  font-size: 0.7rem;
  font-weight: 600;
  border-radius: 16px;
  color: #fff;
  z-index: 10;
  background: #555;
  text-transform: uppercase;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

/* üé® Couleurs par type de lot (selon les valeurs brutes dans models) */
.lot-type-badge.vehicules                { background: #1e88e5; }
.lot-type-badge.immobilier               { background: #43a047; }
.lot-type-badge.materiel_pro            { background: #f4511e; }
.lot-type-badge.informatique_electronique { background: #5e35b1; }
.lot-type-badge.mobilier_equipements     { background: #00897b; }
.lot-type-badge.bijoux_objets_valeur     { background: #fdd835; color: #000; }
.lot-type-badge.stocks_invendus          { background: #6d4c41; }
.lot-type-badge.oeuvres_collections      { background: #9e9e9e; }




.bookmark-btn {
  opacity: 1; /* visible par d√©faut */
  transition: opacity 0.3s ease;
}

.bookmark-btn:hover {
  opacity: 0; /* dispara√Æt au hover */
}

</style>